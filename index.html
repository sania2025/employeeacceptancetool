<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Employee Digital Acceptance Tool</title>
  <style>
    :root{
      --bg:#c8c8c8;
      --card:#e7d9ef;
      --ok:#2e7d32;        /* green */
      --warn:#ef6c00;      /* amber */
      --bad:#c62828;       /* red */
      --text:#222;
      --muted:#666;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 100px;
      background-color: var(--bg);
      color: var(--text);
    }
    h1 {
      text-align: center;
      color: black;
      font-size: 40px;
    }
    .section {
      background-color: var(--card);
      padding: 20px;
      margin-bottom: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .question {
      margin-bottom: 24px;
    }
    .question legend {
      font-weight: normal;
      margin-bottom: 10px;
    }

    /* Likert layout */
    .likert {
      display: grid;
      grid-template-columns: repeat(5, minmax(120px, 1fr));
      gap: 10px;
      align-items: center;
    }
    .option {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.6);
      padding: 8px 10px;
      border-radius: 6px;
    }
    .likert input[type="radio"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    button {
      display: block;
      margin: 30px auto;
      padding: 12px 22px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 3px 10px rgba(0,0,0,0.12);
    }
    button:focus {
      outline: 3px solid rgba(76, 175, 80, 0.35);
      outline-offset: 2px;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.25s ease, visibility 0.25s ease;
      padding: 24px;
    }
    .modal-overlay.show {
      visibility: visible;
      opacity: 1;
    }
    .modal {
      background: #fff;
      padding: 32px;
      border-radius: 12px;
      width: min(700px, 100%);
      text-align: left;
      box-shadow: 0 0 24px rgba(0,0,0,0.35);
      max-height: 90vh;
      overflow: auto;
    }
    .modal h2 {
      margin: 0 0 6px;
      font-size: 28px;
      color: #111;
      text-align: center;
    }
    .modal .sub {
      margin: 0 0 20px;
      text-align: center;
      color: var(--muted);
      font-size: 14px;
    }
    .score-row{
      background: #fafafa;
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 14px 16px;
      margin: 12px 0;
    }
    .score-top{
      display:flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .score-title{
      font-weight: 600;
      font-size: 16px;
    }
    .badge{
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 13px;
      color:#fff;
      white-space: nowrap;
    }
    .badge.ready{ background: var(--ok); }
    .badge.support{ background: var(--warn); }
    .badge.resist{ background: var(--bad); }

    .bar{
      position: relative;
      height: 12px;
      background: #eee;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 10px;
    }
    .bar > span{
      display:block;
      height:100%;
      width:0%;
      background:#999;
      border-radius: 999px;
      transition: width 0.6s ease;
    }
    .bar > span.ready{ background: var(--ok); }
    .bar > span.support{ background: var(--warn); }
    .bar > span.resist{ background: var(--bad); }

    .modal .legend{
      margin-top: 16px;
      font-size: 13px;
      color: var(--muted);
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }
    .legend .key{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .key .dot{
      width:12px; height:12px; border-radius:50%;
      background:#ccc;
    }
    .key .dot.ready{ background: var(--ok); }
    .key .dot.support{ background: var(--warn); }
    .key .dot.resist{ background: var(--bad); }

    .modal .actions{
      display:flex;
      justify-content: center;
      margin-top: 22px;
    }
    .modal .actions button{
      background:#333;
    }

    @media (max-width: 720px){
      body { margin: 24px; }
      .likert{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <h1>Employee Digital Acceptance Tool</h1>

  <form id="surveyForm" aria-labelledby="formTitle">
    <div id="formSections"></div>
    <button type="submit">Submit Survey</button>
  </form>

  <!-- Results Modal -->
  <div id="scoreModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <h2 id="modalTitle">Technology Acceptance Scores</h2>
      <p class="sub">Percent scores are whole numbers (0–100)</p>
      <div id="scoreContent" aria-live="polite"></div>

      <div class="legend" aria-hidden="true">
        <div class="key"><span class="dot resist"></span> 0–40: High Resistance</div>
        <div class="key"><span class="dot support"></span> 41–70: Needs Support</div>
        <div class="key"><span class="dot ready"></span> 71–100: Ready Adopter</div>
      </div>

      <div class="actions">
        <button id="closeModal" type="button" aria-label="Close results">Close</button>
      </div>
    </div>
  </div>

  <script>
    const questions = {
      Psychological: [
        "I have a positive outlook on using new technologies in my job?",
        "Using new technologies makes my work more interesting?",
        "I believe technology enhances my productivity?",
        "I feel confident in my ability to learn how to use new technologies?",
        "I can troubleshoot technology problems on my own?",
        "I am capable of adapting to new digital tools quickly?",
        "I actively seek out opportunities to use new technologies at work?",
        "I take the initiative to learn about new workplace technologies?",
        "I often volunteer to try out new systems or digital tools?",
        "I can manage competing demands and still remain open to change?",
        "I feel comfortable dealing with uncertainty during digital transitions?",
        "I view conflicting demands during change as an opportunity to grow?"
      ],
      Technological: [
        "I believe this technology will make my job easier?",
        "This technology will improve the quality of my work?",
        "Using this technology will increase my productivity?",
        "This technology will help me perform tasks more efficiently?",
        "I expect my performance to improve by using this technology?",
        "The technology will enable me to accomplish tasks more quickly?",
        "I believe learning to use this technology will be easy for me?",
        "It will require minimal effort to use this technology effectively?",
        "I find the technology straightforward to operate?",
        "I am comfortable using digital tools relevant to my job?",
        "I can quickly learn new digital platforms?",
        "I possess the necessary digital skills to succeed in my role?"
      ],
      Organisational: [
        "I trust that management introduces technology with employee interest in mind?",
        "Management supports us through digital changes?",
        "I feel management communicates openly about technological change?",
        "Training will be available when new technology is introduced?",
        "I will receive adequate training for new technologies?",
        "The organisation provides resources to help me learn new tools?",
        "My workplace encourages innovation and digital adoption?",
        "There is a shared willingness in my team to adopt new technologies?",
        "The organisation promotes a mindset of continuous digital learning?"
      ]
    };

    const likertLabels = [
      "Strongly Disagree",
      "Disagree",
      "Neutral",
      "Agree",
      "Strongly Agree"
    ];

    const formSections = document.getElementById("formSections");

    // Build sections with radio buttons
    Object.entries(questions).forEach(([domain, qs]) => {
      const section = document.createElement("div");
      section.className = "section";

      const header = document.createElement("h2");
      header.textContent = domain + " Domain";
      section.appendChild(header);

      qs.forEach((question, index) => {
        const groupName = `${domain.toLowerCase()}${index + 1}`;

        const qFieldset = document.createElement("fieldset");
        qFieldset.className = "question";

        const legend = document.createElement("legend");
        legend.textContent = question;
        qFieldset.appendChild(legend);

        const likertRow = document.createElement("div");
        likertRow.className = "likert";

        likertLabels.forEach((labelText, i) => {
          const value = i + 1;
          const id = `${groupName}_${value}`;

          const optionWrap = document.createElement("label");
          optionWrap.className = "option";
          optionWrap.setAttribute("for", id);

          const input = document.createElement("input");
          input.type = "radio";
          input.name = groupName;
          input.id = id;
          input.value = value;
          if (i === 0) input.required = true;

          const text = document.createElement("span");
          text.textContent = `${value} - ${labelText}`;

          optionWrap.appendChild(input);
          optionWrap.appendChild(text);
          likertRow.appendChild(optionWrap);
        });

        qFieldset.appendChild(likertRow);
        section.appendChild(qFieldset);
      });

      formSections.appendChild(section);
    });

    // Helpers for evaluation
    function getCategory(score){
      // score is 0-100 integer
      if (score <= 40) return { label: "High Resistance", cls: "resist" };
      if (score <= 70) return { label: "Needs Support", cls: "support" };
      return { label: "Ready Adopter", cls: "ready" };
    }

    document.getElementById("surveyForm").addEventListener("submit", function(event) {
      event.preventDefault();

      const scores = { Psychological: 0, Technological: 0, Organisational: 0 };
      const maxScores = { Psychological: 12 * 5, Technological: 12 * 5, Organisational: 9 * 5 };

      Object.keys(questions).forEach(domain => {
        questions[domain].forEach((_, idx) => {
          const name = `${domain.toLowerCase()}${idx + 1}`;
          const checked = document.querySelector(`input[name="${name}"]:checked`);
          scores[domain] += parseInt(checked.value, 10);
        });
      });

      // Build results UI
      const parts = Object.keys(scores).map(domain => {
        const pct = Math.round(scores[domain] / maxScores[domain] * 100);
        const { label, cls } = getCategory(pct);

        return `
          <div class="score-row" role="group" aria-label="${domain} score">
            <div class="score-top">
              <div class="score-title">${domain} Score</div>
              <div class="badge ${cls}" aria-label="Category">${label}</div>
            </div>
            <div class="score-val" style="margin-top:8px;"><strong>${pct}/100</strong></div>
            <div class="bar" aria-hidden="true"><span class="${cls}" style="width:${pct}%"></span></div>
          </div>
        `;
      });

      document.getElementById("scoreContent").innerHTML = parts.join("");
      document.getElementById("scoreModal").classList.add("show");

      // Move focus to modal for accessibility
      document.getElementById("closeModal").focus();
    });

    document.getElementById("closeModal").addEventListener("click", function() {
      document.getElementById("scoreModal").classList.remove("show");
    });

    // Close on overlay click or ESC
    document.getElementById("scoreModal").addEventListener("click", (e)=>{
      if(e.target.id === "scoreModal"){
        document.getElementById("scoreModal").classList.remove("show");
      }
    });
    document.addEventListener("keydown", (e)=>{
      if(e.key === "Escape"){
        document.getElementById("scoreModal").classList.remove("show");
      }
    });
  </script>
</body>
</html>
